language: node_js
sudo: false

node_js:
  - "10"
  - "12"
  - "node"

env:
  TASK: test

matrix:
  include:
    - node_js: "12"
      env:
        TASK: lint
  allow_failures:
    - node_js: "node"

before_script:
  - export HARMONY_OPTS=$(node --v8-options | grep --only-matching -- '--harmony_generators')

script:
  - npm run $TASK

after_script:
  - npm run coveralls
